"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.SwipeItem=exports.Swipe=exports.default=void 0;var _react=_interopRequireDefault(require("react")),_reactDom=_interopRequireDefault(require("react-dom")),_propTypes=_interopRequireDefault(require("prop-types")),_swipejs=_interopRequireDefault(require("swipejs"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(r){var n=_isNativeReflectConstruct();return function(){var e,t=_getPrototypeOf(r);return _possibleConstructorReturn(this,n?(e=_getPrototypeOf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var noop=function(){},Swipe=function(){_inherits(Swipe,_react["default"].Component);var t=_createSuper(Swipe);function Swipe(e){return _classCallCheck(this,Swipe),(e=t.call(this,e)).state={needsReSetup:!1,prevChildrenLength:0},e._isMount=!1,e.instance=null,e}return _createClass(Swipe,[{key:"componentDidUpdate",value:function(){var e=this,t=(this.state||{}).needsReSetup,t=void 0!==t&&t;this._isMount&&t&&(setTimeout(function(){return e.setupSwipe()},10),this.setState({needsReSetup:!1}))}},{key:"componentDidMount",value:function(){var e=this;this._isMount=!0,setTimeout(function(){return e.setupSwipe()},10)}},{key:"swipeOptions",value:function(){var e=this.props;return{startSlide:e.startSlide,speed:e.speed,auto:e.auto,draggable:e.draggable,continuous:e.continuous,autoRestart:e.autoRestart,disableScroll:e.disableScroll,stopPropagation:e.stopPropagation,ignore:e.ignore,callback:e.callback,transitionEnd:e.transitionEnd,dragStart:e.dragStart,dragEnd:e.dragEnd}}},{key:"setupSwipe",value:function(){var e;this.swipeContainer&&(e=this.swipeOptions(),this.instance?(this.instance.setup(e),e.auto&&this.instance.restart()):this.instance=new _swipejs.default(this.swipeContainer,e))}},{key:"componentWillUnmount",value:function(){this._isMount=!1;try{this.instance.kill()}catch(e){}}},{key:"cloneSwipeItem",value:function(e){var t=Object.assign({},e.props);return delete(t=Object.assign(t,{ref:function(e){e=_reactDom.default.findDOMNode(e);e&&e.setAttribute("data-cloned",!0)},key:String(Math.random()).valueOf()})).id,_react.default.createElement(SwipeItem,t,e.props.children)}},{key:"render",value:function(){var e,t=this,r=this.props,n=r.className,o=r.style;return r.continuous?2===(e=[].concat(this.props.children)).length&&(e.push(this.cloneSwipeItem(e[0])),e.push(this.cloneSwipeItem(e[1]))):e=this.props.children,_react.default.createElement("div",{ref:function(e){return t.swipeContainer=e},className:"swipe ".concat(n||""),style:o},_react.default.createElement("div",{className:"swipe-wrap"},e))}}],[{key:"getDerivedStateFromProps",value:function(e,t){e=(e.children||[]).length;return e!==(t.prevChildrenLength||0)?{prevChildrenLength:e,needsReSetup:!0}:null}}]),Swipe}();exports.Swipe=Swipe;var SwipeItem=function(){_inherits(r,_react["default"].Component);var t=_createSuper(r);function r(e){return _classCallCheck(this,r),(e=t.call(this,e)).state={},e}return _createClass(r,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.onClick,n=e.style,e=e.children;return _react.default.createElement("div",{className:"swipe-item ".concat(t||""),onClick:r,style:n},e)}}],[{key:"propTypes",get:function(){return{className:_propTypes.default.string,onClick:_propTypes.default.func,style:_propTypes.default.object}}},{key:"defaultProps",get:function(){return{className:"",onClick:noop,style:{}}}}]),r}();function proxyMethods(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.map(function(e){Swipe.prototype[e]=function(){if(this.instance)return this.instance[e].apply(this.instance,arguments)}})}exports.SwipeItem=SwipeItem,Swipe.defaultProps={className:"",style:{},startSlide:0,speed:300,auto:3e3,draggable:!1,continuous:!1,autoRestart:!1,disableScroll:!1,stopPropagation:!1,ignore:null,callback:noop,transitionEnd:noop,dragStart:noop,dragEnd:noop},Swipe.propTypes={className:_propTypes.default.string,style:_propTypes.default.object,startSlide:_propTypes.default.number,speed:_propTypes.default.number,auto:_propTypes.default.number,draggable:_propTypes.default.bool,continuous:_propTypes.default.bool,autoRestart:_propTypes.default.bool,disableScroll:_propTypes.default.bool,stopPropagation:_propTypes.default.bool,ignore:_propTypes.default.string,callback:_propTypes.default.func,transitionEnd:_propTypes.default.func,dragStart:_propTypes.default.func,dragEnd:_propTypes.default.func},proxyMethods("prev","next","getPos","getNumSlides","slide","restart","stop","setup","disable","enable","kill");var _default=Swipe;exports.default=Swipe;